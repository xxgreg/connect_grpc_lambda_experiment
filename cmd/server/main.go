package main

import (
	"fmt"
	"net/http"
	"os"

	"example/gen/greet/v1/greetv1connect" // generated by protoc-gen-connect-go
)

func main() {
	greeter := &GreetServer{}
	mux := http.NewServeMux()
	path, handler := greetv1connect.NewGreetServiceHandler(greeter)
	mux.Handle(path, handler)
	err := Start(mux, logger)
	if err != nil {
		_, _ = fmt.Fprintln(os.Stderr, err)
		os.Exit(1)
	}
}

func logger(msg string) {
	_, _ = fmt.Fprintln(os.Stderr, msg)
}
